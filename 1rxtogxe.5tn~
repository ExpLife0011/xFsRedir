# xFsRedir

这个是目录重定向的程序，也是一个分布式网络文件系统程序。   
可以把多个服务端目录集中到一台机器,
如同访问本地文件系统一样。

他可以代替NetDrive等软件提供功能更强大的多文件服务器的集中管理和访问，
并且完全免费使用，本软件不隐含连接到某个固定服务器，
因此也并不提供版本自动更新功能，若需要获新版本，或者发现BUG，
可以给本人发送邮件， mailto:fanxiushu@163.com，或者到CSDN以及GitHUB索取。
CSDN: http://blog.csdn.net/fanxiushu
GitHUB: https://github.com/fanxiushu
本软件不属于任何组织和公司，版权归fanxiushu个人所有。 
                                          
                                             范秀树 2015-2016

软件原理及开发说明：

基本功能是把对windows平台某个目录的所有访问重新定向到
网络上的另外一个机器的某个目录，实现基本的网络文件系统。
比如A机器的某个 'D:\\dir' 目录，经过本程序，
被定向到 B 机器的 'E:\\' 目录，A机器上的任何程序访问'D:\\dir'的
内容，实际上是在访问B机器的 'E:\\' 目录。

本程序的工作原理是在内核驱动层，拦截某个目录如'd:\\dir'的所有请求，
然后转发所有请求到程序的应用层，再通过网络转发到B机器服务端程序。

驱动程序 xfs_redir.sys 是本人自主开发，驱动中无任何开源代码参合，
驱动实现了windows Cache功能，同时是细化到某个目录来拦截请求，
这是市面上大部分类似驱动所没有的，大部分驱动都只能重定向到一个新的虚拟盘符，
比如NetDrive，WebDrive等许多类似软件，他们都只能虚拟到新盘符。
因此，你可以像linux挂载文件系统那样，随意在某个目录下挂载新的目录，
也可以多级的复杂挂载，
比如 'd:\\Path1' 挂载到S1服务器，'d:\\Path1\\Path2' 挂载到S2服务器等，
从而实现一个复杂的小型分布式文件系统。

断断续续的开发，以及断断续续的调试本驱动的BUG，延续的时间比较长，即便如此，
也不敢保证本驱动代码不存在BUG，以及在某些特殊应用程序调用特殊WIN32API
时候，不会造成本驱动蓝屏崩溃。

本程序目前支持的网络通信协议有7,8种，
一，PRIVATE协议，这个是最初开发这个驱动的时候，没想到还能支持很多公开
的网络文件系统协议而自己定义的TCP层上的简单和方便的私有网络文件系统协议。
二，NFS协议，这个是广泛使用在UNIX操作系统之间的网络文件系统协议，
windows服务器版本支持NFS服务端，同时也有免费的windows平台的NFS服务程序。
三，SMB协议，这个就是大家非常熟悉的windows的文件夹共享，能在各个windows
系统或者linux，macOS系统直接进行文件共享，
四，SFTP协议，如果非常熟悉linux的ssh登录，会非常熟悉这个协议，凡是linux
系统，都会默认安装ssh。
五，FTP协议，古老而方便的文件协议。
六，WebDAV协议，目前有些网络云存储支持这个协议，比如坚果云或者box等。
七，Baidu PCS，这个是百度云存储接口，但是可惜不再提供支持，
当初开发的时候，从网上使用了别人的wp2pcs的授权，可惜开发完成后，
没用多少时间，就好像被百度屏蔽了，因此，是个鸡肋。
八，GitHUB，这个是国外比较出名的代码托管网站，之所以开发这个，因为偶尔会在
上边托管些程序，但是它的接口并不完全符合文件系统的API，比如就没有rename等功能。


开发这些通讯协议所花费的时间是比较短的，因为大部分都是借用开源项目。
NFS客户端借用的是 Ronnie Sahlberg 作者的代码，代码地址：
https://github.com/sahlberg/libnfs
SMB是直接打开 \\\\server\\ShareFolder 方式的文件处理。
SFTP是借用 libssh2 + openssl 库
FTP是自己以socket为基础开发
WebDaV， BaiduPCS，GitHUB都是借用 curl + openssl 库。

